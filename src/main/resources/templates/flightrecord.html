<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Pilot Log</title>
<meta charset="UTF-8" />
<link href="../static/css/normalize.css" th:href="@{/css/normalize.css}" rel="stylesheet" />
<link href="../static/css/pilotlog.css" th:href="@{/css/pilotlog.css}" rel="stylesheet" />
<script type="text/javascript">
	function clearForm() {
		document.forms[0].callsign.value = "";
		document.forms[0].aircraft.value = "";
		document.forms[0].origin.value = "";
		document.forms[0].destination.value = "";
		document.forms[0].submit();
	}
</script>
</head>
<body>
  <div id="header">
    <img th:src="@{/images/logo.png}" />
    <div class="title">
      <h1>Flight Record</h1>
      <a href="https://github.com/sanhozay/PilotLog" target="_blank">https://github.com/sanhozay/PilotLog</a>
    </div>
    <form th:fragment="searchForm" method="GET" th:object="${example}">
      <fieldset>
        <legend>Search</legend>
        <div class="row">
          <label for="aircraft">Aircraft</label>
          <input type="text" name="aircraft" th:value="${example.aircraft}" autocomplete="off" />
        </div>
        <div class="row">
          <label for="aircraft">Registration</label>
          <input type="text" name="callsign" th:value="${example.callsign}" autocomplete="off" />
        </div>
        <div class="row">
          <label for="aircraft">Departure</label>
          <input type="text" name="origin" th:value="${example.origin}" autocomplete="off" />
        </div>
        <div class="row">
          <label for="destination">Arrival</label>
          <input type="text" name="destination" th:value="${example.destination}" autocomplete="off" />
        </div>
        <div class="buttons">
          <input class="button" type="submit" value="Search" />
          <input class="button" type="button" value="Clear" onClick="clearForm();" />
        </div>
      </fieldset>
    </form>
  </div>
  <div id="content">
    <table>
      <caption>Fuel quantities in US gallons, fuel rate in US gallons per hour.</caption>
      <thead>
        <tr class="main">
          <th colspan="3">Details of Flight</th>
          <th colspan="2">Departure</th>
          <th colspan="2">Arrival</th>
          <th colspan="4">Fuel</th>
          <th colspan="1">Dist</th>
          <th colspan="1">Time</th>
        </tr>
        <tr>
          <th>Date</th>
          <th>Aircraft</th>
          <th>Registration</th>
          <th>Airport</th>
          <th>Time</th>
          <th>Airport</th>
          <th>Time</th>
          <th>Takeoff</th>
          <th>Land</th>
          <th>Used</th>
          <th>Rate</th>
          <th>Nm</th>
          <th>Hours</th>
        </tr>
      </thead>
      <tbody>
        <tr th:class="${flight.status}" th:each="flight: ${flights}">
          <td th:text="${#dates.format(flight.startTime, 'dd/MM/yy')}">01 Jan 17</td>
          <td><a th:href="@{/(aircraft=${flight.aircraft})}"
            th:text="${#strings.capitalize(flight.aircraft)}"
            th:title="'Search for flights in ' + ${#strings.capitalize(flight.aircraft)}">
              Aircraft</a></td>
          <td><a th:href="@{/(callsign=${flight.callsign})}" th:text="${flight.callsign}"
            th:title="'Search for flights for ' + ${flight.callsign}"> G-XXXX</a></td>
          <td><a th:href="@{/(origin=${flight.origin})}" th:text="${flight.origin}"
            th:title="'Search for flights from ' + ${flight.origin}"> XXXX</a></td>
          <td th:text="${#dates.format(flight.startTime, 'HH:mm')}">00:00</td>
          <td><a th:href="@{/(destination=${flight.destination})}"
            th:text="${flight.destination}"
            th:title="'Search for flights to ' + ${flight.destination}"> XXXX</a></td>
          <td th:text="${flight.endTime} ? ${#dates.format(flight.endTime, 'HH:mm')}">00:00</td>
          <td th:text="${#numbers.formatDecimal(flight.startFuel, 1, 1)}">10.0</td>
          <td th:text="${flight.endFuel} ? ${#numbers.formatDecimal(flight.endFuel, 1, 1)}">10.0</td>
          <td th:text="${flight.fuelUsed} ? ${#numbers.formatDecimal(flight.fuelUsed, 1, 1)}">10.0</td>
          <td th:text="${flight.fuelRate} ? ${#numbers.formatDecimal(flight.fuelRate, 1, 1)}">10.0</td>
          <td th:text="${flight.distance} ? ${#numbers.formatDecimal(flight.distance, 1, 0)}">10.0</td>
          <td th:text="${@durationFormatter.format(flight.duration)}">00:00</td>
        </tr>
        <tr th:if="${flights.numberOfElements} == 0">
          <td colspan="12">No matching flights</td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td colspan="12" class="footerTitle">Page Total</td>
          <td class="written" th:text="${@durationFormatter.format(total.pageTotal)}">0:00</td>
        </tr>
        <tr>
          <td colspan="12" class="footerTitle">Other Total</td>
          <td class="written" th:text="${@durationFormatter.format(total.otherTotal)}">0:00</td>
        </tr>
        <tr>
          <td colspan="12" class="footerTitle">FLIGHT HOURS TOTAL</td>
          <td class="written" th:text="${@durationFormatter.format(total.grandTotal)}">0:00</td>
        </tr>
      </tfoot>
    </table>
  </div>
  <div id="footer">
    <div th:if="${flights.totalPages > 1}" id="pager">
      <a th:each="page: ${pages}" th:class="${page == flights.number + 1 ? 'current' : 'page'}"
        th:href="@{/(page=${page} - 1)}" th:text="${page}">P</a>
    </div>
    <p id="count" th:text="${flights.totalElements} + ' flights'"></p>
  </div>
</body>
</html>